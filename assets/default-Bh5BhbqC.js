import{p as P,g as w,m as U,a as $,u as I,c as o,n as N,b as z,d as y,e as J,f as K,h as ue,i as ce,j as Z,k as de,l as ve,o as ee,q as me,r as ge,s as L,t as b,v as fe,V as te,w as F,x as D,y as be,z as ae,A as he,B as A,C as ye,D as xe,E as Se,F as j,G as ke,H as Ve,I as _e,J as Te,K as M,L as Be,M as Ce,N as Le,O as Ne,P as le,Q as Pe,R as oe,S as we,T as Ie,U as He,W as Re,X as Ae,Y as Ee,Z as E,_ as Me,$ as De,a0 as We,a1 as Ue,a2 as O,a3 as m,a4 as Y,a5 as $e,a6 as T,a7 as V,a8 as B,a9 as Q,aa as X,ab as W,ac as R,ad as ze}from"./index-ZNf8_ipZ.js";import{u as ne}from"./ssrBoot-BeJ91MMS.js";import{V as Fe}from"./VContainer-DSIzkPvM.js";import{V as je}from"./VMenu-DWj4IA3j.js";import{V as Oe,a as Ye,b as Xe}from"./VList-BctJqUch.js";import"./VDivider-B-akS8EZ.js";const se=P({text:String,...$(),...U()},"VToolbarTitle"),ie=w()({name:"VToolbarTitle",props:se(),setup(e,c){let{slots:t}=c;return I(()=>{const g=!!(t.default||t.text||e.text);return o(e.tag,{class:z(["v-toolbar-title",e.class]),style:N(e.style)},{default:()=>{var d;return[g&&y("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(d=t.default)==null?void 0:d.call(t)])]}})}),{}}}),qe=[null,"prominent","default","comfortable","compact"],re=P({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>qe.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ce(),...$(),...ue(),...K(),...U({tag:"header"}),...J()},"VToolbar"),p=w()({name:"VToolbar",props:re(),setup(e,c){var x;let{slots:t}=c;const{backgroundColorClasses:g,backgroundColorStyles:d}=Z(()=>e.color),{borderClasses:a}=de(e),{elevationClasses:r}=ve(e),{roundedClasses:u}=ee(e),{themeClasses:n}=me(e),{rtlClasses:h}=ge(),l=L(e.extended===null?!!((x=t.extension)!=null&&x.call(t)):e.extended),i=b(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),S=b(()=>l.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return fe({VBtn:{variant:"text"}}),I(()=>{var C;const v=!!(e.title||t.title),f=!!(t.image||e.image),k=(C=t.extension)==null?void 0:C.call(t);return l.value=e.extended===null?!!k:e.extended,o(e.tag,{class:z(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},g.value,a.value,r.value,u.value,n.value,h.value,e.class]),style:N([d.value,e.style])},{default:()=>[f&&y("div",{key:"image",class:"v-toolbar__image"},[t.image?o(F,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):o(te,{key:"image-img",cover:!0,src:e.image},null)]),o(F,{defaults:{VTabs:{height:D(i.value)}}},{default:()=>{var s,_,H;return[y("div",{class:"v-toolbar__content",style:{height:D(i.value)}},[t.prepend&&y("div",{class:"v-toolbar__prepend"},[(s=t.prepend)==null?void 0:s.call(t)]),v&&o(ie,{key:"title",text:e.title},{text:t.title}),(_=t.default)==null?void 0:_.call(t),t.append&&y("div",{class:"v-toolbar__append"},[(H=t.append)==null?void 0:H.call(t)])])]}}),o(F,{defaults:{VTabs:{height:D(S.value)}}},{default:()=>[o(be,null,{default:()=>[l.value&&y("div",{class:"v-toolbar__extension",style:{height:D(S.value)}},[k])]})]})]})}),{contentHeight:i,extensionHeight:S}}}),Qe=P({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function pe(e){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=c;let g=0,d=0;const a=ae(null),r=L(0),u=L(0),n=L(0),h=L(!1),l=L(!1),i=b(()=>Number(e.scrollThreshold)),S=b(()=>he((i.value-r.value)/i.value||0)),x=()=>{const v=a.value;if(!v||t&&!t.value)return;g=r.value,r.value="window"in v?v.pageYOffset:v.scrollTop;const f=v instanceof Window?document.documentElement.scrollHeight:v.scrollHeight;if(d!==f){d=f;return}l.value=r.value<g,n.value=Math.abs(r.value-i.value)};return A(l,()=>{u.value=u.value||r.value}),A(h,()=>{u.value=0}),ye(()=>{A(()=>e.scrollTarget,v=>{var k;const f=v?document.querySelector(v):window;f&&f!==a.value&&((k=a.value)==null||k.removeEventListener("scroll",x),a.value=f,a.value.addEventListener("scroll",x,{passive:!0}))},{immediate:!0})}),xe(()=>{var v;(v=a.value)==null||v.removeEventListener("scroll",x)}),t&&A(t,x,{immediate:!0}),{scrollThreshold:i,currentScroll:r,currentThreshold:n,isScrollActive:h,scrollRatio:S,isScrollingUp:l,savedScroll:u}}const Ge=P({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...re(),..._e(),...Qe(),height:{type:[Number,String],default:64}},"VAppBar"),Je=w()({name:"VAppBar",props:Ge(),emits:{"update:modelValue":e=>!0},setup(e,c){let{slots:t}=c;const g=ae(),d=Se(e,"modelValue"),a=b(()=>{var _;const s=new Set(((_=e.scrollBehavior)==null?void 0:_.split(" "))??[]);return{hide:s.has("hide"),fullyHide:s.has("fully-hide"),inverted:s.has("inverted"),collapse:s.has("collapse"),elevate:s.has("elevate"),fadeImage:s.has("fade-image")}}),r=b(()=>{const s=a.value;return s.hide||s.fullyHide||s.inverted||s.collapse||s.elevate||s.fadeImage||!d.value}),{currentScroll:u,scrollThreshold:n,isScrollingUp:h,scrollRatio:l}=pe(e,{canScroll:r}),i=j(()=>a.value.hide||a.value.fullyHide),S=b(()=>e.collapse||a.value.collapse&&(a.value.inverted?l.value>0:l.value===0)),x=b(()=>e.flat||a.value.fullyHide&&!d.value||a.value.elevate&&(a.value.inverted?u.value>0:u.value===0)),v=b(()=>a.value.fadeImage?a.value.inverted?1-l.value:l.value:void 0),f=b(()=>{var H,q;if(a.value.hide&&a.value.inverted)return 0;const s=((H=g.value)==null?void 0:H.contentHeight)??0,_=((q=g.value)==null?void 0:q.extensionHeight)??0;return i.value?u.value<n.value||a.value.fullyHide?s+_:s:s+_});ke(()=>!!e.scrollBehavior,()=>{Te(()=>{i.value?a.value.inverted?d.value=u.value>n.value:d.value=h.value||u.value<n.value:d.value=!0})});const{ssrBootStyles:k}=ne(),{layoutItemStyles:C}=Ve({id:e.name,order:b(()=>parseInt(e.order,10)),position:j(()=>e.location),layoutSize:f,elementSize:L(void 0),active:d,absolute:j(()=>e.absolute)});return I(()=>{const s=p.filterProps(e);return o(p,M({ref:g,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...C.value,"--v-toolbar-image-opacity":v.value,height:void 0,...k.value},e.style]},s,{collapse:S.value,flat:x.value}),t)}),{}}}),Ke=w()({name:"VAppBarTitle",props:se(),setup(e,c){let{slots:t}=c;return I(()=>o(ie,M(e,{class:"v-app-bar-title"}),t)),{}}}),Ze=P({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:He,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...$(),...Ie({location:"top end"}),...K(),...U(),...J(),...we({transition:"scale-rotate-transition"}),...oe()},"VBadge"),G=w()({name:"VBadge",inheritAttrs:!1,props:Ze(),setup(e,c){const{backgroundColorClasses:t,backgroundColorStyles:g}=Z(()=>e.color),{roundedClasses:d}=ee(e),{t:a}=Be(),{textColorClasses:r,textColorStyles:u}=Ce(()=>e.textColor),{themeClasses:n}=Le(),{locationStyles:h}=Ne(e,!0,i=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(i)?Number(e.offsetY??0):["left","right"].includes(i)?Number(e.offsetX??0):0)),{dimensionStyles:l}=le(e);return I(()=>{const i=Number(e.content),S=!e.max||isNaN(i)?e.content:i<=Number(e.max)?i:`${e.max}+`,[x,v]=Pe(c.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return o(e.tag,M({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},v,{style:e.style}),{default:()=>{var f,k;return[y("div",{class:"v-badge__wrapper"},[(k=(f=c.slots).default)==null?void 0:k.call(f),o(Re,{transition:e.transition},{default:()=>{var C,s;return[Ae(y("span",M({class:["v-badge__badge",n.value,t.value,d.value,r.value],style:[g.value,u.value,l.value,e.inline?{}:h.value],"aria-atomic":"true","aria-label":a(e.label,i),"aria-live":"polite",role:"status"},x),[e.dot?void 0:c.slots.badge?(s=(C=c.slots).badge)==null?void 0:s.call(C):e.icon?o(E,{icon:e.icon},null):S]),[[Ee,e.modelValue]])]}})])]}})}),{}}}),et=P({scrollable:Boolean,...$(),...oe(),...U({tag:"main"})},"VMain"),tt=w()({name:"VMain",props:et(),setup(e,c){let{slots:t}=c;const{dimensionStyles:g}=le(e),{mainStyles:d}=Me(),{ssrBootStyles:a}=ne();return I(()=>o(e.tag,{class:z(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:N([d.value,a.value,g.value,e.style])},{default:()=>{var r,u;return[e.scrollable?y("div",{class:"v-main__scroller"},[(r=t.default)==null?void 0:r.call(t)]):(u=t.default)==null?void 0:u.call(t)]}})),{}}}),at=""+new URL("logo-lsOHVjQO.png",import.meta.url).href,lt={class:"navitem1"},ot={class:"navitem2",style:{"margin-left":"auto"}},dt={__name:"default",setup(e){const c=Ue(),t=De(),g=We();A(()=>t.isLoggedIn,u=>{console.log("isLoggedIn changed to:",u,"Nickname:",t.nickname,"Token:",t.token,"Role:",t.role)});const d=[{title:"尋找換宿",to:"/FindHost"},{title:"旅遊分享",to:"/"},{title:"找旅伴",to:"/"},{title:"測驗去哪兒",to:"/"}],a=b(()=>t.role==="host"?[{title:"工作",to:"/host/job",icon:"mdi-briefcase"},{title:"通知",to:"/notifications",icon:"mdi-bell"},{title:"尋找小幫手",to:"/backpackers",icon:"mdi-file-document-multiple"},{title:"登出",to:"/",action:()=>{t.logout(),g({text:"已成功登出！",snackbarProps:{color:"green"}}),c.push("/")},icon:"mdi-logout"}]:[{title:"喜愛工作",to:"/favorite-jobs",icon:"mdi-heart"},{title:"喜愛文章",to:"/favorite-post",icon:"mdi-file-document"},{title:"個人履歷",to:"/myresume",icon:"mdi-account"},{title:"通知",to:"/notifications",icon:"mdi-bell"},{title:"登出",to:"/",action:()=>{t.logout(),g({text:"已成功登出！",snackbarProps:{color:"green"}}),c.push("/")},icon:"mdi-logout"}]),r=b(()=>{const n=(t.nickname||"用戶").length,h=Math.max(...a.value.map(i=>i.title.length));return Math.max(4,n,h)*10+40});return(u,n)=>{const h=$e("router-view");return T(),O(Y,null,[o(Je,{color:"primary",height:80},{default:m(()=>[o(Fe,{class:"d-flex align-center custom-container"},{default:m(()=>[o(te,{class:"mr-2","max-height":"40","max-width":"40",src:at}),o(Ke,{class:z(["d-flex align-center",{"cursor-pointer":!0}]),onClick:n[0]||(n[0]=l=>V(c).push("/"))},{default:m(()=>n[1]||(n[1]=[B(" 島嶼漫遊 ",-1)])),_:1,__:[1]}),y("div",lt,[(T(),O(Y,null,Q(d,l=>o(X,{key:l.to,to:l.to},{default:m(()=>[B(W(l.title),1)]),_:2},1032,["to"])),64))]),y("div",ot,[V(t).isLoggedIn?(T(),R(je,{key:V(t).isLoggedIn},{activator:m(({props:l})=>[o(X,M(l,{class:"d-flex align-center custom-menu-btn",color:"secondary",style:{minWidth:r.value+"px",textAlign:"center"}}),{default:m(()=>[V(t).role==="host"?(T(),R(E,{key:0,class:"mr-1"},{default:m(()=>n[3]||(n[3]=[B("mdi-home",-1)])),_:1,__:[3]})):(T(),R(E,{key:1,class:"mr-2"},{default:m(()=>n[4]||(n[4]=[B("mdi-account",-1)])),_:1,__:[4]})),o(G,{color:"red",content:V(t).notificationCount,"model-value":V(t).notificationCount>0,"offset-x":"-8","offset-y":"-8"},{default:m(()=>[y("span",null,W(V(t).nickname||"用戶"),1)]),_:1},8,["content","model-value"]),o(E,{class:"ml-1",small:""},{default:m(()=>n[5]||(n[5]=[B("mdi-menu-down",-1)])),_:1,__:[5]})]),_:2},1040,["style"])]),default:m(()=>[o(Oe,{style:N({minWidth:r.value+"px"})},{default:m(()=>[(T(!0),O(Y,null,Q(a.value,l=>(T(),R(Ye,{key:l.title,style:N({minWidth:r.value+"px"}),to:l.to,onClick:i=>l.action?l.action():null},ze({default:m(()=>[o(Xe,null,{default:m(()=>[o(E,{class:"mr-1",small:""},{default:m(()=>[B(W(l.icon),1)]),_:2},1024),B(" "+W(l.title),1)]),_:2},1024)]),_:2},[l.to==="/notifications"&&V(t).notificationCount>0?{name:"append",fn:m(()=>[o(G,{color:"red",content:V(t).notificationCount,inline:""},null,8,["content"])]),key:"0"}:void 0]),1032,["style","to","onClick"]))),128))]),_:1},8,["style"])]),_:1})):(T(),R(X,{key:0,color:"#ea914e",style:N({minWidth:r.value+"px",textAlign:"center"}),to:"/login",variant:"elevated"},{default:m(()=>n[2]||(n[2]=[B(" 會員登入 ",-1)])),_:1,__:[2]},8,["style"]))])]),_:1})]),_:1}),o(tt,null,{default:m(()=>[o(h)]),_:1})],64)}}};export{dt as default};
