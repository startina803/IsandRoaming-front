import{p as N,g as P,m as U,a as $,u as I,c as o,b as y,n as w,d as z,e as K,f as ue,h as ce,i as Q,j as de,k as me,s as L,l as b,o as ve,V as Z,q as F,r as D,t as ge,v as ee,w as te,x as fe,y as be,z as ae,A as he,B as A,C as ye,D as xe,E as Se,F as Y,G as ke,H as _e,I as M,J as Ve,K as Te,L as Be,M as Ce,N as Le,O as we,P as le,Q as Ne,R as Pe,S as Ie,T as He,U as E,W as oe,X as Re,Y as Ae,Z as Ee,_ as Me,$ as De,a0 as We,a1 as Ue,a2 as j,a3 as T,a4 as v,a5 as _,a6 as B,a7 as O,a8 as q,a9 as R,aa as X,ab as W,ac as $e,ad as ze}from"./index-BImF1kkh.js";import{V as Fe}from"./VContainer-DdEv8xVa.js";import{V as Ye,a as je,b as Oe}from"./VList-MRGnofIu.js";import{V as Xe}from"./VMenu-195117w7.js";import{u as ne}from"./ssrBoot-nol1qRBI.js";import"./VDivider-A6c9VW4y.js";const se=N({text:String,...$(),...U()},"VToolbarTitle"),ie=P()({name:"VToolbarTitle",props:se(),setup(e,c){let{slots:t}=c;return I(()=>{const g=!!(t.default||t.text||e.text);return o(e.tag,{class:z(["v-toolbar-title",e.class]),style:w(e.style)},{default:()=>{var d;return[g&&y("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(d=t.default)==null?void 0:d.call(t)])]}})}),{}}}),pe=[null,"prominent","default","comfortable","compact"],re=N({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>pe.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...be(),...$(),...fe(),...te(),...U({tag:"header"}),...ee()},"VToolbar"),G=P()({name:"VToolbar",props:re(),setup(e,c){var x;let{slots:t}=c;const{backgroundColorClasses:g,backgroundColorStyles:d}=K(()=>e.color),{borderClasses:a}=ue(e),{elevationClasses:r}=ce(e),{roundedClasses:u}=Q(e),{themeClasses:n}=de(e),{rtlClasses:h}=me(),l=L(e.extended===null?!!((x=t.extension)!=null&&x.call(t)):e.extended),i=b(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),S=b(()=>l.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ve({VBtn:{variant:"text"}}),I(()=>{var C;const m=!!(e.title||t.title),f=!!(t.image||e.image),k=(C=t.extension)==null?void 0:C.call(t);return l.value=e.extended===null?!!k:e.extended,o(e.tag,{class:z(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},g.value,a.value,r.value,u.value,n.value,h.value,e.class]),style:w([d.value,e.style])},{default:()=>[f&&y("div",{key:"image",class:"v-toolbar__image"},[t.image?o(F,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):o(Z,{key:"image-img",cover:!0,src:e.image},null)]),o(F,{defaults:{VTabs:{height:D(i.value)}}},{default:()=>{var s,V,H;return[y("div",{class:"v-toolbar__content",style:{height:D(i.value)}},[t.prepend&&y("div",{class:"v-toolbar__prepend"},[(s=t.prepend)==null?void 0:s.call(t)]),m&&o(ie,{key:"title",text:e.title},{text:t.title}),(V=t.default)==null?void 0:V.call(t),t.append&&y("div",{class:"v-toolbar__append"},[(H=t.append)==null?void 0:H.call(t)])])]}}),o(F,{defaults:{VTabs:{height:D(S.value)}}},{default:()=>[o(ge,null,{default:()=>[l.value&&y("div",{class:"v-toolbar__extension",style:{height:D(S.value)}},[k])]})]})]})}),{contentHeight:i,extensionHeight:S}}}),qe=N({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ge(e){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=c;let g=0,d=0;const a=ae(null),r=L(0),u=L(0),n=L(0),h=L(!1),l=L(!1),i=b(()=>Number(e.scrollThreshold)),S=b(()=>he((i.value-r.value)/i.value||0)),x=()=>{const m=a.value;if(!m||t&&!t.value)return;g=r.value,r.value="window"in m?m.pageYOffset:m.scrollTop;const f=m instanceof Window?document.documentElement.scrollHeight:m.scrollHeight;if(d!==f){d=f;return}l.value=r.value<g,n.value=Math.abs(r.value-i.value)};return A(l,()=>{u.value=u.value||r.value}),A(h,()=>{u.value=0}),ye(()=>{A(()=>e.scrollTarget,m=>{var k;const f=m?document.querySelector(m):window;f&&f!==a.value&&((k=a.value)==null||k.removeEventListener("scroll",x),a.value=f,a.value.addEventListener("scroll",x,{passive:!0}))},{immediate:!0})}),xe(()=>{var m;(m=a.value)==null||m.removeEventListener("scroll",x)}),t&&A(t,x,{immediate:!0}),{scrollThreshold:i,currentScroll:r,currentThreshold:n,isScrollActive:h,scrollRatio:S,isScrollingUp:l,savedScroll:u}}const Je=N({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...re(),...Ve(),...qe(),height:{type:[Number,String],default:64}},"VAppBar"),Ke=P()({name:"VAppBar",props:Je(),emits:{"update:modelValue":e=>!0},setup(e,c){let{slots:t}=c;const g=ae(),d=Se(e,"modelValue"),a=b(()=>{var V;const s=new Set(((V=e.scrollBehavior)==null?void 0:V.split(" "))??[]);return{hide:s.has("hide"),fullyHide:s.has("fully-hide"),inverted:s.has("inverted"),collapse:s.has("collapse"),elevate:s.has("elevate"),fadeImage:s.has("fade-image")}}),r=b(()=>{const s=a.value;return s.hide||s.fullyHide||s.inverted||s.collapse||s.elevate||s.fadeImage||!d.value}),{currentScroll:u,scrollThreshold:n,isScrollingUp:h,scrollRatio:l}=Ge(e,{canScroll:r}),i=Y(()=>a.value.hide||a.value.fullyHide),S=b(()=>e.collapse||a.value.collapse&&(a.value.inverted?l.value>0:l.value===0)),x=b(()=>e.flat||a.value.fullyHide&&!d.value||a.value.elevate&&(a.value.inverted?u.value>0:u.value===0)),m=b(()=>a.value.fadeImage?a.value.inverted?1-l.value:l.value:void 0),f=b(()=>{var H,p;if(a.value.hide&&a.value.inverted)return 0;const s=((H=g.value)==null?void 0:H.contentHeight)??0,V=((p=g.value)==null?void 0:p.extensionHeight)??0;return i.value?u.value<n.value||a.value.fullyHide?s+V:s:s+V});ke(()=>!!e.scrollBehavior,()=>{Te(()=>{i.value?a.value.inverted?d.value=u.value>n.value:d.value=h.value||u.value<n.value:d.value=!0})});const{ssrBootStyles:k}=ne(),{layoutItemStyles:C}=_e({id:e.name,order:b(()=>parseInt(e.order,10)),position:Y(()=>e.location),layoutSize:f,elementSize:L(void 0),active:d,absolute:Y(()=>e.absolute)});return I(()=>{const s=G.filterProps(e);return o(G,M({ref:g,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...C.value,"--v-toolbar-image-opacity":m.value,height:void 0,...k.value},e.style]},s,{collapse:S.value,flat:x.value}),t)}),{}}}),Qe=P()({name:"VAppBarTitle",props:se(),setup(e,c){let{slots:t}=c;return I(()=>o(ie,M(e,{class:"v-app-bar-title"}),t)),{}}}),Ze=N({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Ee,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...$(),...Ae({location:"top end"}),...te(),...U(),...ee(),...Re({transition:"scale-rotate-transition"}),...oe()},"VBadge"),J=P()({name:"VBadge",inheritAttrs:!1,props:Ze(),setup(e,c){const{backgroundColorClasses:t,backgroundColorStyles:g}=K(()=>e.color),{roundedClasses:d}=Q(e),{t:a}=Be(),{textColorClasses:r,textColorStyles:u}=Ce(()=>e.textColor),{themeClasses:n}=Le(),{locationStyles:h}=we(e,!0,i=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(i)?Number(e.offsetY??0):["left","right"].includes(i)?Number(e.offsetX??0):0)),{dimensionStyles:l}=le(e);return I(()=>{const i=Number(e.content),S=!e.max||isNaN(i)?e.content:i<=Number(e.max)?i:`${e.max}+`,[x,m]=Ne(c.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return o(e.tag,M({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},m,{style:e.style}),{default:()=>{var f,k;return[y("div",{class:"v-badge__wrapper"},[(k=(f=c.slots).default)==null?void 0:k.call(f),o(Pe,{transition:e.transition},{default:()=>{var C,s;return[Ie(y("span",M({class:["v-badge__badge",n.value,t.value,d.value,r.value],style:[g.value,u.value,l.value,e.inline?{}:h.value],"aria-atomic":"true","aria-label":a(e.label,i),"aria-live":"polite",role:"status"},x),[e.dot?void 0:c.slots.badge?(s=(C=c.slots).badge)==null?void 0:s.call(C):e.icon?o(E,{icon:e.icon},null):S]),[[He,e.modelValue]])]}})])]}})}),{}}}),et=N({scrollable:Boolean,...$(),...oe(),...U({tag:"main"})},"VMain"),tt=P()({name:"VMain",props:et(),setup(e,c){let{slots:t}=c;const{dimensionStyles:g}=le(e),{mainStyles:d}=Me(),{ssrBootStyles:a}=ne();return I(()=>o(e.tag,{class:z(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:w([d.value,a.value,g.value,e.style])},{default:()=>{var r,u;return[e.scrollable?y("div",{class:"v-main__scroller"},[(r=t.default)==null?void 0:r.call(t)]):(u=t.default)==null?void 0:u.call(t)]}})),{}}}),at=""+new URL("logo-BuEM-OD8.png",import.meta.url).href,lt={class:"navitem1"},ot={class:"navitem2",style:{"margin-left":"auto"}},nt={class:"user-nickname"},mt={__name:"default",setup(e){const c=Ue(),t=De(),g=We();A(()=>t.isLoggedIn,u=>{console.log("isLoggedIn changed to:",u,"Nickname:",t.nickname,"Token:",t.token,"Role:",t.role)});const d=[{title:"尋找換宿",to:"/FindHost"},{title:"旅遊分享",to:"/"},{title:"找旅伴",to:"/"},{title:"測驗去哪兒",to:"/"}],a=b(()=>t.role==="host"?[{title:"工作",to:"/host/job",icon:"mdi-briefcase"},{title:"通知",to:"/notifications",icon:"mdi-bell"},{title:"尋找小幫手",to:"/backpackers",icon:"mdi-file-document-multiple"},{title:"登出",to:"/",action:()=>{t.logout(),g({text:"已成功登出！",snackbarProps:{color:"green"}}),c.push("/")},icon:"mdi-logout"}]:[{title:"喜愛工作",to:"/favorite-jobs",icon:"mdi-heart"},{title:"喜愛文章",to:"/favorite-post",icon:"mdi-file-document"},{title:"個人履歷",to:"/myresume",icon:"mdi-account"},{title:"通知",to:"/notifications",icon:"mdi-bell"},{title:"登出",to:"/",action:()=>{t.logout(),g({text:"已成功登出！",snackbarProps:{color:"green"}}),c.push("/")},icon:"mdi-logout"}]),r=b(()=>{const n=(t.nickname||"用戶").length,h=Math.max(...a.value.map(i=>i.title.length));return Math.max(4,n,h)*10+40});return(u,n)=>{const h=$e("router-view");return T(),j(O,null,[o(Ke,{color:"primary",height:80},{default:v(()=>[o(Fe,{class:"d-flex align-center custom-container"},{default:v(()=>[o(Z,{class:"mr-2","max-height":"40","max-width":"40",src:at}),o(Qe,{class:z(["d-flex align-center",{"cursor-pointer":!0}]),onClick:n[0]||(n[0]=l=>_(c).push("/"))},{default:v(()=>n[1]||(n[1]=[B(" 島嶼漫遊 ",-1)])),_:1,__:[1]}),y("div",lt,[(T(),j(O,null,q(d,l=>o(X,{key:l.to,to:l.to},{default:v(()=>[B(W(l.title),1)]),_:2},1032,["to"])),64))]),y("div",ot,[_(t).isLoggedIn?(T(),R(Xe,{key:_(t).isLoggedIn},{activator:v(({props:l})=>[o(X,M(l,{class:"d-flex align-center custom-menu-btn",color:"secondary",style:{minWidth:r.value+"px",textAlign:"center"}}),{default:v(()=>[_(t).role==="host"?(T(),R(E,{key:0,class:"mr-1"},{default:v(()=>n[3]||(n[3]=[B("mdi-home",-1)])),_:1,__:[3]})):(T(),R(E,{key:1,class:"mr-2"},{default:v(()=>n[4]||(n[4]=[B("mdi-account",-1)])),_:1,__:[4]})),o(J,{color:"red",content:_(t).notificationCount,"model-value":_(t).notificationCount>0,"offset-x":"-8","offset-y":"-8"},{default:v(()=>[y("span",nt,W(_(t).nickname||"用戶"),1)]),_:1},8,["content","model-value"]),o(E,{class:"ml-1",small:""},{default:v(()=>n[5]||(n[5]=[B("mdi-menu-down",-1)])),_:1,__:[5]})]),_:2},1040,["style"])]),default:v(()=>[o(Ye,{class:"user-dropdown-list",style:w({minWidth:r.value+"px"})},{default:v(()=>[(T(!0),j(O,null,q(a.value,l=>(T(),R(je,{key:l.title,style:w({minWidth:r.value+"px"}),to:l.to,onClick:i=>l.action?l.action():null},ze({default:v(()=>[o(Oe,null,{default:v(()=>[o(E,{class:"mr-1",small:""},{default:v(()=>[B(W(l.icon),1)]),_:2},1024),B(" "+W(l.title),1)]),_:2},1024)]),_:2},[l.to==="/notifications"&&_(t).notificationCount>0?{name:"append",fn:v(()=>[o(J,{color:"red",content:_(t).notificationCount,inline:""},null,8,["content"])]),key:"0"}:void 0]),1032,["style","to","onClick"]))),128))]),_:1},8,["style"])]),_:1})):(T(),R(X,{key:0,color:"#ea914e",style:w({minWidth:r.value+"px",textAlign:"center"}),to:"/login",variant:"elevated"},{default:v(()=>n[2]||(n[2]=[B(" 會員登入 ",-1)])),_:1,__:[2]},8,["style"]))])]),_:1})]),_:1}),o(tt,null,{default:v(()=>[o(h)]),_:1})],64)}}};export{mt as default};
