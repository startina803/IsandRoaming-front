import{z as n,aO as _,ae as U,a1 as C,a0 as P,B as q,a2 as R,a6 as S,c as l,a3 as o,ag as B,V as I,d as T,aj as D,a8 as i,ak as j,ao as F,ar as s,aa as p,am as L,an as N,au as O,ap as z}from"./index-C1-B-ZmA.js";import A from"./index-DxFrxLuh.js";import{_ as E,V as M,a as g}from"./_plugin-vue_export-helper-_cMqggcE.js";import{V as G}from"./VForm-C737C_te.js";import{V as H}from"./VSelect-BYu1cYdP.js";import"./VContainer-CzQ2huk6.js";import"./VDivider-D-crs3r1.js";import"./VList-BNNVZ_Xd.js";import"./ssrBoot-B1tlGZvC.js";import"./VMenu-bFlW0RgS.js";import"./VChip-yxnS3Qqs.js";const J=""+new URL("register-1-SOj1Ibog.jpg",import.meta.url).href,K={class:"pa-md-8 pa-6 d-flex flex-column h-100"},Q={__name:"register",setup(W){const d=n(!1),u=n(!1),m=n(!1),t=_({account:"",email:"",password:"",confirmPassword:"",nickname:"",identity:"背包客"}),v=["背包客","旅宿主人"],x=n(J),b=U(),V=C(),c=P();q(()=>b.path,r=>{d.value=r==="/register"},{immediate:!0});const w=async()=>{var r,a;if(u.value){m.value=!0;try{const{confirmPassword:e,...y}=t;await z.create(y),c({text:"註冊成功！將為您導向登入頁面。",snackbarProps:{color:"green"}}),f()}catch(e){console.error("Register error:",e),c({text:((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"註冊失敗，請稍後再試！",snackbarProps:{color:"red"}})}finally{m.value=!1}}},f=()=>{V.push("/login")},k=()=>{d.value=!1,V.push("/")};return(r,a)=>(S(),R("div",null,[l(A),l(O,{modelValue:d.value,"onUpdate:modelValue":a[7]||(a[7]=e=>d.value=e),"max-width":"800",persistent:""},{default:o(()=>[l(B,{class:"pa-0"},{default:o(()=>[l(M,{"no-gutters":""},{default:o(()=>[l(g,{class:"d-none d-md-block",md:"6"},{default:o(()=>[l(I,{class:"rounded-l-lg",cover:"",height:"100%",src:x.value},null,8,["src"])]),_:1}),l(g,{class:"d-flex flex-column",cols:"12",md:"6"},{default:o(()=>[T("div",K,[l(D,{class:"headline text-center pa-0 mb-6"},{default:o(()=>a[8]||(a[8]=[i("註冊",-1)])),_:1,__:[8]}),l(j,{class:"pa-0 flex-grow-1"},{default:o(()=>[l(G,{modelValue:u.value,"onUpdate:modelValue":a[6]||(a[6]=e=>u.value=e),onSubmit:F(w,["prevent"])},{default:o(()=>[l(s,{modelValue:t.account,"onUpdate:modelValue":a[0]||(a[0]=e=>t.account=e),label:"帳號",maxlength:"20",required:"",rules:[e=>!!e||"帳號是必填的",e=>e&&e.length>=4||"至少4個字元"],variant:"outlined"},null,8,["modelValue","rules"]),l(s,{modelValue:t.email,"onUpdate:modelValue":a[1]||(a[1]=e=>t.email=e),label:"信箱",required:"",rules:[e=>!!e||"信箱是必填的",e=>/.+@.+\..+/.test(e)||"請輸入有效信箱"],variant:"outlined"},null,8,["modelValue","rules"]),l(s,{modelValue:t.password,"onUpdate:modelValue":a[2]||(a[2]=e=>t.password=e),label:"密碼",maxlength:"20",required:"",rules:[e=>!!e||"密碼是必填的",e=>e&&e.length>=4||"至少4個字元"],type:"password",variant:"outlined"},null,8,["modelValue","rules"]),l(s,{modelValue:t.confirmPassword,"onUpdate:modelValue":a[3]||(a[3]=e=>t.confirmPassword=e),label:"確認密碼",required:"",rules:[e=>!!e||"確認密碼是必填的",e=>e===t.password||"密碼不匹配"],type:"password",variant:"outlined"},null,8,["modelValue","rules"]),l(s,{modelValue:t.nickname,"onUpdate:modelValue":a[4]||(a[4]=e=>t.nickname=e),label:"名字 / 旅宿名稱",maxlength:"20",required:"",rules:[e=>!!e||"暱稱是必填的"],variant:"outlined"},null,8,["modelValue","rules"]),l(H,{modelValue:t.identity,"onUpdate:modelValue":a[5]||(a[5]=e=>t.identity=e),items:v,label:"身分",required:"",rules:[e=>!!e||"請選擇身分"],variant:"outlined"},null,8,["modelValue","rules"]),l(p,{block:"",class:"mt-2",color:"primary",disabled:!u.value,loading:m.value,type:"submit"},{default:o(()=>a[9]||(a[9]=[i(" 註冊 ",-1)])),_:1,__:[9]},8,["disabled","loading"]),l(p,{class:"mt-2",color:"primary",text:"",onClick:f},{default:o(()=>a[10]||(a[10]=[i(" 返回登入 ",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"])]),_:1}),l(L,{class:"pa-0 mt-4"},{default:o(()=>[l(N),l(p,{color:"secondary",onClick:k},{default:o(()=>a[11]||(a[11]=[i("關閉",-1)])),_:1,__:[11]})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},se=E(Q,[["__scopeId","data-v-cbb0cced"]]);export{se as default};
