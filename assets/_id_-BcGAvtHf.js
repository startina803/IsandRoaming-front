import{ae as A,a1 as R,a0 as $,z as m,C as D,ac as d,a6 as r,a3 as t,c as e,af as M,ag as y,d as n,ah as E,a8 as l,ab as i,ai as L,a2 as B,aj as S,aa as u,Z as U,ak as k,al as Z,am as T,an as z}from"./index-Byp8e-x8.js";import{i as I}from"./invitation-B1PeEZEx.js";import{_ as q,V as F,a as G}from"./_plugin-vue_export-helper-CWTpz6OG.js";import{V as N}from"./VAlert-Dzl-FIT5.js";import{V as x}from"./VDivider-BGd0bN-f.js";import{V as H}from"./VSheet-DxPX7ukt.js";import{V as J}from"./VTextarea-BzyEiG-G.js";import{V as K}from"./VChip-CjMb426A.js";import{V as O}from"./VContainer-CJAcr6hH.js";const Q={class:"text-h5 font-weight-bold text-primary"},W={class:"text-body-1",style:{"white-space":"pre-wrap"}},X={style:{"white-space":"pre-wrap"}},Y={key:0},h={key:1,class:"pa-5 text-center"},aa={__name:"[id]",setup(ea){const b=A(),P=R(),_=$(),s=m(null),C=m(!0),v=m(null),c=m(!1),g=m(""),w=async()=>{var p,a;try{const{data:o}=await I.getById(b.params.id);o.success?s.value=o.result:v.value=o.message}catch(o){v.value=((a=(p=o.response)==null?void 0:p.data)==null?void 0:a.message)||"載入邀請失敗，請稍後再試。"}finally{C.value=!1}},j=async p=>{var a,o;c.value=!0;try{const{data:f}=await I.updateStatus(b.params.id,p,g.value);f.success?(_({text:f.message,snackbarProps:{color:"success"}}),await w()):_({text:f.message,snackbarProps:{color:"error"}})}catch(f){_({text:((o=(a=f.response)==null?void 0:a.data)==null?void 0:o.message)||"操作失敗",snackbarProps:{color:"error"}})}finally{c.value=!1}},V=()=>{P.back()};return D(w),(p,a)=>(r(),d(O,null,{default:t(()=>[e(F,{justify:"center"},{default:t(()=>[e(G,{cols:"12",lg:"8",md:"10"},{default:t(()=>[C.value?(r(),d(y,{key:0,class:"pa-5 text-center"},{default:t(()=>[e(E,{color:"primary",indeterminate:"",size:"64"}),a[3]||(a[3]=n("p",{class:"mt-4"},"正在載入邀請內容...",-1))]),_:1,__:[3]})):v.value?(r(),d(N,{key:1,prominent:"",type:"error"},{default:t(()=>[l(i(v.value),1)]),_:1})):s.value?(r(),d(L,{key:2,appear:"",name:"card-open"},{default:t(()=>[e(y,{class:"invitation-card",rounded:"lg"},{default:t(()=>[e(S,{class:"d-flex align-center pa-5"},{default:t(()=>[e(u,{class:"mr-2",color:"grey",icon:"",size:"small",variant:"text",onClick:V},{default:t(()=>[e(U,null,{default:t(()=>a[4]||(a[4]=[l("mdi-arrow-left",-1)])),_:1,__:[4]})]),_:1}),n("span",Q,"來自「"+i(s.value.from.nickname)+"」的換宿邀請",1)]),_:1}),e(x,{color:"orange-darken-1"}),e(k,{class:"pa-5"},{default:t(()=>[a[7]||(a[7]=n("p",{class:"text-subtitle-1 mb-4"},"對方說：",-1)),e(H,{class:"pa-4 rounded-lg",color:"grey-lighten-4"},{default:t(()=>[n("p",W,i(s.value.message),1)]),_:1}),e(x,{class:"my-6",color:"orange-darken-1"}),a[8]||(a[8]=n("h3",{class:"text-h6 font-weight-bold mb-4"},"邀請您應徵的工作",-1)),s.value.job?(r(),d(y,{key:0,variant:"outlined"},{default:t(()=>[e(S,null,{default:t(()=>[l(i(s.value.job.title),1)]),_:1}),e(Z,null,{default:t(()=>[l(i(s.value.job.location),1)]),_:1}),e(k,null,{default:t(()=>[n("p",X,i(s.value.job.workContent),1)]),_:1}),e(T,null,{default:t(()=>[e(z),e(u,{color:"primary",to:`/jobs/${s.value.job._id}`,variant:"text"},{default:t(()=>a[5]||(a[5]=[l("查看工作詳情",-1)])),_:1,__:[5]},8,["to"])]),_:1})]),_:1})):(r(),d(N,{key:1,type:"warning",variant:"tonal"},{default:t(()=>a[6]||(a[6]=[l(" 相關工作資訊不存在或已被刪除。 ",-1)])),_:1,__:[6]}))]),_:1,__:[7,8]}),e(x,{color:"orange-darken-1"}),s.value.status==="pending"?(r(),B("div",Y,[e(k,{class:"pa-5"},{default:t(()=>[a[9]||(a[9]=n("h3",{class:"text-h6 font-weight-bold mb-4"},"回覆此邀請",-1)),e(J,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=o=>g.value=o),"auto-grow":"",label:"您的回覆訊息 (選填)",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1,__:[9]}),e(T,{class:"pa-4"},{default:t(()=>[e(z),e(u,{color:"grey",loading:c.value,variant:"text",onClick:V},{default:t(()=>a[10]||(a[10]=[l("再考慮一下",-1)])),_:1,__:[10]},8,["loading"]),e(u,{color:"error",loading:c.value,variant:"tonal",onClick:a[1]||(a[1]=o=>j("rejected"))},{default:t(()=>a[11]||(a[11]=[l("拒絕",-1)])),_:1,__:[11]},8,["loading"]),e(u,{color:"success",loading:c.value,variant:"flat",onClick:a[2]||(a[2]=o=>j("accepted"))},{default:t(()=>a[12]||(a[12]=[l("接受",-1)])),_:1,__:[12]},8,["loading"])]),_:1})])):(r(),B("div",h,[e(K,{color:s.value.status==="accepted"?"success":"error",size:"large"},{default:t(()=>[l(" 您已"+i(s.value.status==="accepted"?"接受":"拒絕")+"此邀請 ",1)]),_:1},8,["color"]),e(u,{class:"mt-4",variant:"text",onClick:V},{default:t(()=>a[13]||(a[13]=[l("返回",-1)])),_:1,__:[13]})]))]),_:1})]),_:1})):M("",!0)]),_:1})]),_:1})]),_:1}))}},ca=q(aa,[["__scopeId","data-v-37dcadec"]]);export{ca as default};
