import{a0 as R,z as m,C as D,a9 as n,a4 as t,ae as M,a1 as U,a3 as r,c as e,af as B,ag as _,b as i,ah as E,a6 as s,ab as u,ai as L,a2 as S,aj as b,aa as d,U as q,ak as T,al as z,am as A,an as N}from"./index-C55sMSK3.js";import{a as P}from"./application-LCGXecGZ.js";import{_ as F,V as G,a as H}from"./_plugin-vue_export-helper-DV_06Gul.js";import{V as J}from"./VContainer-CUh0MeAW.js";import{V as $}from"./VAlert-BBhXOk9z.js";import{V as g}from"./VDivider-6-PoTZaw.js";import{V as K}from"./VSheet-CA9QD7Yc.js";import{V as O}from"./VTextarea-Bq5ttATt.js";import{V as Q}from"./VChip-D3_VWYGz.js";const W={class:"text-h5 font-weight-bold text-primary"},X={class:"text-body-1",style:{"white-space":"pre-wrap"}},Y={key:0},Z={key:1,class:"pa-5 text-center"},h={__name:"[id]",setup(aa){const x=M(),I=U(),V=R(),l=m(null),C=m(!0),v=m(null),p=m(!1),y=m(""),w=async()=>{var c,a;try{const{data:o}=await P.getById(x.params.id);o.success?l.value=o.result:v.value=o.message}catch(o){v.value=((a=(c=o.response)==null?void 0:c.data)==null?void 0:a.message)||"載入應徵失敗，請稍後再試。"}finally{C.value=!1}},j=async c=>{var a,o;p.value=!0;try{const{data:f}=await P.updateStatus(x.params.id,c,y.value);f.success?(V({text:f.message,snackbarProps:{color:"success"}}),await w()):V({text:f.message,snackbarProps:{color:"error"}})}catch(f){V({text:((o=(a=f.response)==null?void 0:a.data)==null?void 0:o.message)||"操作失敗",snackbarProps:{color:"error"}})}finally{p.value=!1}},k=()=>{I.back()};return D(w),(c,a)=>(r(),n(J,null,{default:t(()=>[e(G,{justify:"center"},{default:t(()=>[e(H,{cols:"12",lg:"8",md:"10"},{default:t(()=>[C.value?(r(),n(_,{key:0,class:"pa-5 text-center"},{default:t(()=>[e(E,{color:"primary",indeterminate:"",size:"64"}),a[3]||(a[3]=i("p",{class:"mt-4"},"正在載入應徵內容...",-1))]),_:1,__:[3]})):v.value?(r(),n($,{key:1,prominent:"",type:"error"},{default:t(()=>[s(u(v.value),1)]),_:1})):l.value?(r(),n(L,{key:2,appear:"",name:"card-open"},{default:t(()=>[e(_,{class:"application-card",rounded:"lg"},{default:t(()=>[e(b,{class:"d-flex align-center pa-5"},{default:t(()=>[e(d,{class:"mr-2",color:"grey",icon:"",size:"small",variant:"text",onClick:k},{default:t(()=>[e(q,null,{default:t(()=>a[4]||(a[4]=[s("mdi-arrow-left",-1)])),_:1,__:[4]})]),_:1}),i("span",W,"來自「"+u(l.value.applicant.nickname)+"」的應徵",1)]),_:1}),e(g,{color:"orange-darken-1"}),e(T,{class:"pa-5"},{default:t(()=>[a[8]||(a[8]=i("p",{class:"text-subtitle-1 mb-4"},"對方說：",-1)),e(K,{class:"pa-4 rounded-lg",color:"grey-lighten-4"},{default:t(()=>[i("p",X,u(l.value.message),1)]),_:1}),e(g,{class:"my-6",color:"orange-darken-1"}),a[9]||(a[9]=i("h3",{class:"text-h6 font-weight-bold mb-4"},"應徵者履歷",-1)),l.value.resume?(r(),n(_,{key:0,to:`/resumes/${l.value.resume._id}`,variant:"outlined"},{default:t(()=>[e(b,null,{default:t(()=>[s("查看 "+u(l.value.applicant.nickname)+" 的履歷",1)]),_:1}),e(z,null,{default:t(()=>a[5]||(a[5]=[s("點此查看完整履歷",-1)])),_:1,__:[5]})]),_:1},8,["to"])):(r(),n($,{key:1,type:"warning",variant:"tonal"},{default:t(()=>a[6]||(a[6]=[s(" 應徵者尚未建立履歷。 ",-1)])),_:1,__:[6]})),e(g,{class:"my-6",color:"orange-darken-1"}),a[10]||(a[10]=i("h3",{class:"text-h6 font-weight-bold mb-4"},"應徵的工作",-1)),l.value.job?(r(),n(_,{key:2,variant:"outlined"},{default:t(()=>[e(b,null,{default:t(()=>[s(u(l.value.job.title),1)]),_:1}),e(z,null,{default:t(()=>[s(u(l.value.job.location),1)]),_:1}),e(A,null,{default:t(()=>[e(N),e(d,{color:"primary",to:`/jobs/${l.value.job._id}`,variant:"text"},{default:t(()=>a[7]||(a[7]=[s("查看工作詳情",-1)])),_:1,__:[7]},8,["to"])]),_:1})]),_:1})):B("",!0)]),_:1,__:[8,9,10]}),e(g,{color:"orange-darken-1"}),l.value.status==="pending"?(r(),S("div",Y,[e(T,{class:"pa-5"},{default:t(()=>[a[11]||(a[11]=i("h3",{class:"text-h6 font-weight-bold mb-4"},"回覆此應徵",-1)),e(O,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=o=>y.value=o),"auto-grow":"",label:"您的回覆訊息 (選填)",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1,__:[11]}),e(A,{class:"pa-4"},{default:t(()=>[e(N),e(d,{color:"grey",loading:p.value,variant:"text",onClick:k},{default:t(()=>a[12]||(a[12]=[s("再考慮",-1)])),_:1,__:[12]},8,["loading"]),e(d,{color:"error",loading:p.value,variant:"tonal",onClick:a[1]||(a[1]=o=>j("rejected"))},{default:t(()=>a[13]||(a[13]=[s("拒絕",-1)])),_:1,__:[13]},8,["loading"]),e(d,{color:"success",loading:p.value,variant:"flat",onClick:a[2]||(a[2]=o=>j("accepted"))},{default:t(()=>a[14]||(a[14]=[s("接受",-1)])),_:1,__:[14]},8,["loading"])]),_:1})])):(r(),S("div",Z,[e(Q,{color:l.value.status==="accepted"?"success":"error",size:"large"},{default:t(()=>[s(" 您已"+u(l.value.status==="accepted"?"接受":"拒絕")+"此應徵 ",1)]),_:1},8,["color"]),e(d,{class:"mt-4",variant:"text",onClick:k},{default:t(()=>a[15]||(a[15]=[s("返回",-1)])),_:1,__:[15]})]))]),_:1})]),_:1})):B("",!0)]),_:1})]),_:1})]),_:1}))}},da=F(h,[["__scopeId","data-v-7e48186a"]]);export{da as default};
