import{z as o,ae as T,a1 as B,a0 as S,B as j,ac as D,a6 as F,a3 as t,c as a,au as I,ag as N,aj as P,a8 as i,ak as A,V as L,ao as z,ar as s,aa as y,am as E,ap as M}from"./index-Byp8e-x8.js";import{_ as O,V as k,a as x}from"./_plugin-vue_export-helper-CWTpz6OG.js";import{V as G}from"./VForm-DZe3-EFa.js";import{V as H}from"./VSelect-ZVbYDa_o.js";import{V as J}from"./VContainer-CJAcr6hH.js";import"./VList-C0fEIUdN.js";import"./ssrBoot-BJ-r_4ti.js";import"./VDivider-BGd0bN-f.js";import"./VMenu-mFSXI6_X.js";import"./VChip-CjMb426A.js";const K={__name:"register",setup(Q){const u=o(!1),d=o(!1),m=o(!1),p=o(""),V=o(""),n=o(""),b=o(""),v=o(""),f=o("打工換宿者"),w=["打工換宿者","旅宿業者"],C=o("https://via.placeholder.com/300x400"),U=T(),g=B(),_=S();j(()=>U.path,r=>{console.log("Route changed to:",r),u.value=r==="/register"},{immediate:!0});const q=async()=>{var r,l;m.value=!0;try{await M.create({account:p.value,email:V.value,password:n.value,nickname:v.value,identity:f.value}),_({text:"註冊成功！返回登入頁面。",snackbarProps:{color:"green"}}),c(),g.push("/login")}catch(e){console.error("Register error:",e),_({text:((l=(r=e.response)==null?void 0:r.data)==null?void 0:l.message)||"註冊失敗，請稍後再試！",snackbarProps:{color:"red"}})}finally{m.value=!1}},R=()=>{c(),g.push("/login")},c=()=>{u.value=!1,g.push("/")};return(r,l)=>(F(),D(J,{fluid:""},{default:t(()=>[a(k,{align:"center",justify:"center",style:{"min-height":"80vh"}},{default:t(()=>[a(x,{cols:"12"},{default:t(()=>[a(I,{modelValue:u.value,"onUpdate:modelValue":l[7]||(l[7]=e=>u.value=e),"max-width":"800"},{default:t(()=>[a(N,null,{default:t(()=>[a(P,{class:"headline",style:{display:"flex","justify-content":"center"}},{default:t(()=>l[8]||(l[8]=[i("註冊",-1)])),_:1,__:[8]}),a(A,null,{default:t(()=>[a(k,null,{default:t(()=>[a(x,{cols:"6"},{default:t(()=>[a(L,{"aspect-ratio":"1",cover:"",src:C.value},null,8,["src"])]),_:1}),a(x,{cols:"6"},{default:t(()=>[a(G,{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=e=>d.value=e),onSubmit:z(q,["prevent"])},{default:t(()=>[a(s,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=e=>p.value=e),label:"帳號",maxlength:"20",required:"",rules:[e=>!!e||"帳號是必填的",e=>e&&e.length>=4||"至少4個字元"],variant:"outlined"},null,8,["modelValue","rules"]),a(s,{modelValue:V.value,"onUpdate:modelValue":l[1]||(l[1]=e=>V.value=e),label:"信箱",required:"",rules:[e=>!!e||"信箱是必填的",e=>/.+@.+\..+/.test(e)||"請輸入有效信箱"],variant:"outlined"},null,8,["modelValue","rules"]),a(s,{modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=e=>n.value=e),label:"密碼",maxlength:"20",required:"",rules:[e=>!!e||"密碼是必填的",e=>e&&e.length>=4||"至少4個字元"],type:"password",variant:"outlined"},null,8,["modelValue","rules"]),a(s,{modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=e=>b.value=e),label:"確認密碼",required:"",rules:[e=>!!e||"確認密碼是必填的",e=>e===n.value||"密碼不匹配"],type:"password",variant:"outlined"},null,8,["modelValue","rules"]),a(s,{modelValue:v.value,"onUpdate:modelValue":l[4]||(l[4]=e=>v.value=e),label:"名字 / 旅宿名稱",maxlength:"20",required:"",rules:[e=>!!e||"暱稱是必填的"],variant:"outlined"},null,8,["modelValue","rules"]),a(H,{modelValue:f.value,"onUpdate:modelValue":l[5]||(l[5]=e=>f.value=e),items:w,label:"身分",required:"",rules:[e=>!!e||"請選擇身分"],variant:"outlined"},null,8,["modelValue","rules"]),a(y,{block:"",class:"mt-2",color:"primary",disabled:!d.value,loading:m.value,type:"submit"},{default:t(()=>l[9]||(l[9]=[i(" 註冊 ",-1)])),_:1,__:[9]},8,["disabled","loading"]),a(y,{class:"mt-2",color:"primary",text:"",onClick:R},{default:t(()=>l[10]||(l[10]=[i(" 返回登入 ",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(E,null,{default:t(()=>[a(y,{color:"secondary",onClick:c},{default:t(()=>l[11]||(l[11]=[i("關閉",-1)])),_:1,__:[11]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}},oe=O(K,[["__scopeId","data-v-1c4d496f"]]);export{oe as default};
