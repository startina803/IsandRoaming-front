import{a1 as w,a9 as o,a3 as s,a4 as e,c as a,V as B,aj as L,a6 as d,ab as g,ak as S,b as V,a2 as v,af as z,U as x,a7 as h,a8 as C,am as I,an as N,aa as A,ao as F,ag as M,z as y,$ as P,C as T,ap as U,a5 as $,ah as D}from"./index-BImF1kkh.js";import{_ as R,V as i,a as u}from"./_plugin-vue_export-helper-Bl0Y-me6.js";import{V as q}from"./VChip-BCSMjcJi.js";import{V as E}from"./VDivider-A6c9VW4y.js";import{j as J}from"./job-C9FV6w_P.js";import{V as O}from"./VContainer-DdEv8xVa.js";import{V as G}from"./VSelect-CCKAIokF.js";import{V as H}from"./VAlert-BwejKv4J.js";import"./VList-MRGnofIu.js";import"./ssrBoot-nol1qRBI.js";import"./VMenu-195117w7.js";const K={class:"mb-2"},Q={key:0,class:"text-grey"},W={__name:"BackpackerCard",props:{backpacker:{type:Object,required:!0}},setup(n){const m=n,f=w(),c=()=>{f.push(`/resumes/${m.backpacker._id}`)};return(p,r)=>(s(),o(M,{class:"job-list-card",rounded:"lg",onClick:c},{default:e(()=>{var k;return[a(B,{cover:"",height:"250px",src:((k=n.backpacker.photos)==null?void 0:k[0])||"https://cdn.vuetifyjs.com/images/john.jpg"},null,8,["src"]),a(L,{class:"font-weight-bold text-primary"},{default:e(()=>[d(g(n.backpacker.name),1)]),_:1}),a(S,null,{default:e(()=>[V("div",K,[a(x,{class:"mr-1",small:""},{default:e(()=>r[0]||(r[0]=[d("mdi-map-marker-outline",-1)])),_:1,__:[0]}),r[1]||(r[1]=V("span",{class:"text-subtitle-2"},"期望地點",-1))]),(s(!0),v(h,null,C(n.backpacker.desiredLocations,_=>(s(),o(q,{key:_,class:"mr-2 mb-2",color:"primary",size:"small",variant:"tonal"},{default:e(()=>[d(g(_),1)]),_:2},1024))),128)),!n.backpacker.desiredLocations||n.backpacker.desiredLocations.length===0?(s(),v("p",Q," 未指定 ")):z("",!0)]),_:1}),a(E,{class:"mx-4"}),a(I,null,{default:e(()=>[a(N),a(A,{color:"#ea914e",variant:"text",onClick:F(c,["stop"])},{default:e(()=>r[2]||(r[2]=[d(" 查看履歷 ",-1)])),_:1,__:[2]})]),_:1})]}),_:1}))}},X=R(W,[["__scopeId","data-v-e8af4da7"]]),ie={__name:"index",setup(n){const m=y([]),f=y(!0),c=y(null),p=y(null),r=P(),k=Array.from(new Set(["台北","新北","桃園","台中","台南","高雄","新竹","苗栗","彰化","南投","雲林","嘉義","屏東","宜蘭","花蓮","台東","澎湖","金門","連江","基隆","綠島","小琉球","蘭嶼","馬祖"])),_=async()=>{f.value=!0,c.value=null;try{const{data:l}=await U.getPublicBackpackers(p.value);m.value=l.result}catch(l){console.error("Failed to fetch backpackers:",l),c.value="載入資料失敗，請稍後再試。"}finally{f.value=!1}};return T(async()=>{if(r.isLogin&&r.identity==="host")try{const{data:l}=await J.getMyJobs();if(l.result.length>0){const t=l.result[0].location;k.has(t)&&(p.value=t)}}catch(l){console.error("Failed to fetch host jobs for default location:",l)}await _()}),(l,t)=>{const j=X;return s(),o(O,null,{default:e(()=>[a(i,{justify:"center"},{default:e(()=>[a(u,{cols:"12",lg:"10",xl:"9"},{default:e(()=>[a(i,null,{default:e(()=>[a(u,{cols:"12"},{default:e(()=>t[1]||(t[1]=[V("h1",{class:"text-h4 text-primary font-weight-bold mb-4"},"尋找小幫手",-1),V("p",{class:"text-subtitle-1 mb-6"},"在這裡尋找符合您需求的打工換宿夥伴！",-1)])),_:1,__:[1]})]),_:1}),a(i,null,{default:e(()=>[a(u,{cols:"12",md:"4"},{default:e(()=>[a(G,{modelValue:p.value,"onUpdate:modelValue":[t[0]||(t[0]=b=>p.value=b),_],clearable:"",density:"compact",items:$(k),label:"篩選期望地點",variant:"outlined"},null,8,["modelValue","items"])]),_:1})]),_:1}),f.value?(s(),o(i,{key:0,class:"text-center pa-12"},{default:e(()=>[a(D,{color:"primary",indeterminate:"",size:"64"})]),_:1})):c.value?(s(),o(i,{key:1},{default:e(()=>[a(u,null,{default:e(()=>[a(H,{type:"error"},{default:e(()=>[d(g(c.value),1)]),_:1})]),_:1})]),_:1})):m.value.length===0?(s(),o(i,{key:2},{default:e(()=>[a(u,{class:"text-center pa-12"},{default:e(()=>[a(x,{color:"grey-lighten-1",size:"64"},{default:e(()=>t[2]||(t[2]=[d("mdi-account-search-outline",-1)])),_:1,__:[2]}),t[3]||(t[3]=V("p",{class:"mt-4 text-h6 text-grey"},"找不到符合條件的小幫手",-1))]),_:1,__:[3]})]),_:1})):(s(),o(i,{key:3},{default:e(()=>[(s(!0),v(h,null,C(m.value,b=>(s(),o(u,{key:b._id,cols:"12",lg:"3",md:"4",sm:"6"},{default:e(()=>[a(j,{backpacker:b},null,8,["backpacker"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})}}};export{ie as default};
